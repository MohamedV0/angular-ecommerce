<div class="min-h-screen flex items-center justify-center bg-surface-ground py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full space-y-8">
    <!-- Header -->
    <div class="text-center">
      <h2 class="mt-6 text-3xl font-extrabold text-color">
        Create Your Account
      </h2>
      <p class="mt-2 text-sm text-muted-color">
        Join FreshCart and start shopping today
      </p>
    </div>

    <!-- Registration Form Card -->
    <p-card class="shadow-lg">
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
        
        <!-- Full Name Field -->
        <div class="space-y-1">
          <label for="name" class="block text-sm font-medium text-color">Full Name</label>
          <input 
            id="name"
            pInputText 
            formControlName="name"
            placeholder="Enter your full name"
            class="w-full"
            [class.p-invalid]="isFieldInvalid('name')"
          />
          @if (isFieldInvalid('name')) {
            <small class="text-red-500">
              @if (registerForm.get('name')?.errors?.['required']) {
                Full name is required
              }
              @if (registerForm.get('name')?.errors?.['minlength']) {
                Name must be at least 2 characters
              }
            </small>
          }
        </div>

        <!-- Email Field -->
        <div class="space-y-1">
          <label for="email" class="block text-sm font-medium text-color">Email Address</label>
          <input 
            id="email"
            pInputText 
            formControlName="email"
            placeholder="Enter your email address"
            type="email"
            class="w-full"
            [class.p-invalid]="isFieldInvalid('email')"
          />
          @if (isFieldInvalid('email')) {
            <small class="text-red-500">
              @if (registerForm.get('email')?.errors?.['required']) {
                Email is required
              }
              @if (registerForm.get('email')?.errors?.['email']) {
                Please enter a valid email address
              }
            </small>
          }
        </div>

        <!-- Phone Field -->
        <div class="space-y-1">
          <label for="phone" class="block text-sm font-medium text-color">Phone Number</label>
          <input 
            id="phone"
            pInputText 
            formControlName="phone"
            placeholder="01234567890"
            class="w-full"
            [class.p-invalid]="isFieldInvalid('phone')"
          />
          @if (isFieldInvalid('phone')) {
            <small class="text-red-500">
              @if (registerForm.get('phone')?.errors?.['required']) {
                Phone number is required
              }
              @if (registerForm.get('phone')?.errors?.['egyptianPhone']) {
                Please enter a valid Egyptian phone number (11 digits starting with 01)
              }
            </small>
          }
        </div>

        <!-- Password Field -->
        <div class="space-y-1">
          <label for="password" class="block text-sm font-medium text-color">Password</label>
          <p-password 
            id="password"
            formControlName="password"
            placeholder="Enter your password"
            [toggleMask]="true"
            [feedback]="true"
            class="w-full"
            [inputStyle]="{ width: '100%' }"
            [style]="{ width: '100%' }"
          />
          @if (isFieldInvalid('password')) {
            <small class="text-red-500">
              @if (registerForm.get('password')?.errors?.['required']) {
                Password is required
              }
              @if (registerForm.get('password')?.errors?.['minlength']) {
                Password must be at least 8 characters
              }
              @if (registerForm.get('password')?.errors?.['strongPassword']) {
                Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character
              }
            </small>
          }
        </div>

        <!-- Confirm Password Field -->
        <div class="space-y-1">
          <label for="rePassword" class="block text-sm font-medium text-color">Confirm Password</label>
          <p-password 
            id="rePassword"
            formControlName="rePassword"
            placeholder="Confirm your password"
            [toggleMask]="true"
            [feedback]="false"
            class="w-full"
            [inputStyle]="{ width: '100%' }"
            [style]="{ width: '100%' }"
          />
          @if (isFieldInvalid('rePassword')) {
            <small class="text-red-500">
              @if (registerForm.get('rePassword')?.errors?.['required']) {
                Please confirm your password
              }
              @if (registerForm.get('rePassword')?.errors?.['passwordMismatch']) {
                Passwords do not match
              }
            </small>
          }
        </div>

        <!-- Error Message -->
        @if (errorMessage()) {
          <p-message 
            severity="error" 
            [text]="errorMessage()"
            class="w-full"
          />
        }

        <!-- Success Message -->
        @if (successMessage()) {
          <p-message 
            severity="success" 
            [text]="successMessage()"
            class="w-full"
          />
        }

        <!-- severity="success" to make the button green -->

        <!-- Submit Button -->
        <div>
          <p-button 
            type="submit"
            label="Create Account"
            icon="pi pi-user-plus"
            [loading]="isLoading()"
            [disabled]="registerForm.invalid || isLoading()"
            styleClass="w-full p-button-lg"
          />
        </div>

        <!-- Login Link -->
        <div class="text-center">
          <span class="text-sm text-muted-color">
            Already have an account? 
          </span>
          <p-button 
            label="Sign in here"
            (onClick)="navigateToLogin()"
            [text]="true"
            severity="primary"
            size="small"
            styleClass="!p-0 !h-auto !ml-1" />
        </div>
      </form>
    </p-card>
  </div>
</div>

